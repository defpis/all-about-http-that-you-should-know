# HTTPS

同时使用了非对称加密和对称加密，兼顾安全和效率

- 使用非对称加密交换对称加密所需的密钥
- 使用非对称加密验证公钥证书的签名
- 使用协商出来的密钥对称加密数据

## 非对称加密与对称加密

对称加密很好理解，用相同的密钥加解密。

非对称加密需要两种不同的密钥进行加解密，分为公钥和私钥，两种密匙是配对的。

一般来说公钥是可以被公开的，它主要用来加密明文，而相应的私钥不能被公开，用来解密加密的密文。

**注意：公钥加密的密文只能通过相应的私钥来解密，而私钥加密的密文却可以通过相应的公钥来解密。**

公钥加密私钥解密要来加密传输，私钥加密公钥解密用来数字签名。

## 如何确证书的正确性

存在专业的机构——数字证书认证机构（简称CA）来颁发合法的证书

- 首先，CA会向申请者颁发一个证书，这个证书里面的内容有：签发者、证书用途、使用的HASH算法、签名所使用的算法、证书到期的时间等等。
- 紧接着，把上面所提到的内容，做一次HASH求值，得到一个HASH值。
- 再接着，用CA的私钥对这个HASH值和所使用的HASH算法加密，这样就完成了数字签名。而用CA的私钥加密后，就生成了类似人体指纹的签名，任何篡改证书的尝试，都会被数字签名发现。
- 最后，把数字签名，附在数字证书的末尾，传输给服务器。

那客户端上面的CA公钥是从哪里来的呢？

其实，CA除了给申请者发布证书，它自己本身也有自己的证书。CA自身的数字证书（一般由它自己生成）在我们操作系统刚安装好的时候，这些CA自身的数字证书就已经被微软（或者其它操作系统的开发机构）安装在操作系统中了。而CA的公钥就包含在其中。这样，CA就可以通过自身的私钥对发布的数字证书进行签名，而在客户端就能够用对应的公钥来对其进行解密。

总结为一句话：引入权威中心机构来负责管理所有合法公开的证书。

## 相关资料

- <https://segmentfault.com/a/1190000012196642>
